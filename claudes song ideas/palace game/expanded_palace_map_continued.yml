    effects:
      - "Length varies: Quick traversal vs. extended journey"
      - "Echo chamber: Previous actions resonate here"
    encounters:
      - "Attention span tests"
      - "Echo conversations with past selves"
    connections:
      - direction: "east_west_corridor"
        destination: "main_rooms"
    action_difficulties:
      walking_quickly: "small"
      paying_attention_long_distances: "large"
    musical_elements:
      tempo: "walking_pace"
      key: "ambient_drone"
      texture: "corridor_reverb"
      dynamics: "pp-p"
      footstep_rhythms: true

  # HIDDEN/SECRET SPACES FOR WHITE ALBUM EXPANSION
  - name: "Hidden Basement"
    track_equivalent: null
    description: "Subconscious level where the palace's foundation exists."
    musical_character: "Sub-bass frequencies, foundational drones, primal rhythms"
    stats:
      on: 9
      off: 1
    effects:
      - "Foundation access: Understand palace's true nature"
      - "Primal energy: Restore all stats but risk overwhelm"
    encounters:
      - "Original Pulse (source of all palace rhythms)"
      - "Foundation stones (each contains fundamental frequency)"
    connections:
      - direction: "secret_access"
        destination: "Study"
    action_difficulties:
      finding: "large"
      surviving_experience: "large"
    musical_elements:
      tempo: "primal_pulse"
      key: "fundamental_frequencies"
      texture: "sub_bass_foundation"
      dynamics: "fff"
      foundational: true

  - name: "Observatory"
    track_equivalent: null
    description: "Tower room for viewing other albums in Rainbow Table series."
    musical_character: "Starfield ambiences, distant album themes as constellations"
    stats:
      on: 8
      off: 8
    effects:
      - "Telescope: Preview themes from other albums"
      - "Constellation mapping: Connect songs across series"
    encounters:
      - "Album Astronomer (maps relationships between songs)"
      - "Color bleeding (other albums' influences)"
    connections:
      - direction: "accessible_from"
        destination: "Great Chamber"
    action_difficulties:
      observation: "medium"
      cross_album_synthesis: "large"
    musical_elements:
      tempo: "cosmic_slow"
      key: "all_rainbow_keys"
      texture: "starfield_ambience"
      dynamics: "pp with distant swells"
      cross_references:
        - "black_album_themes"
        - "red_album_themes"
        - "orange_album_themes"
        - "green_album_themes"
        - "blue_album_themes"
        - "indigo_album_themes"
        - "violet_album_themes"

  - name: "Memory Vault"
    track_equivalent: null
    description: "Deep storage of all musical memories from previous albums."
    musical_character: "Layered echoes, compressed time, musical archaeology"
    stats:
      on: 4
      off: 6
    effects:
      - "Access all previous musical material"
      - "Risk of getting lost in nostalgia"
    encounters:
      - "Memory Keeper (guardian of musical history)"
      - "Compressed time segments"
      - "Musical fossils"
    connections:
      - direction: "hidden_beneath"
        destination: "Study"
    action_difficulties:
      surface_browsing: "small"
      deep_excavation: "large"
    musical_elements:
      tempo: "time_compressed"
      key: "all_previous_keys"
      texture: "archaeological_layers"
      dynamics: "compressed_memories"
      historical_references: true

# GAMEPLAY MECHANICS FOR MUSICAL GENERATION

encounter_types:
  combat:
    musical_translation: "Dissonance, rhythmic conflict, resolution"
    generation_params:
      tension: "high"
      resolution: "required"
      dynamics: "forte_sections"
  
  puzzle:
    musical_translation: "Modulation, harmonic progression, problem-solving"
    generation_params:
      complexity: "medium_to_high"
      logical_structure: "required"
      resolution: "satisfying"
  
  social:
    musical_translation: "Call and response, harmonic conversation, duets"
    generation_params:
      interaction: "melodic_dialogue"
      harmony: "collaborative"
      rhythm: "conversational"
  
  exploration:
    musical_translation: "Ambient discovery, timbral variation"
    generation_params:
      openness: "high"
      surprise: "moderate"
      texture: "varied"

action_difficulties_to_music:
  small:
    complexity: "simple"
    elements: ["basic_melodies", "simple_rhythms"]
    dynamics: "pp-mp"
  
  medium:
    complexity: "moderate"
    elements: ["developed_themes", "moderate_rhythms", "harmonic_progression"]
    dynamics: "mp-mf"
  
  large:
    complexity: "high"
    elements: ["complex_compositions", "challenging_performances", "full_arrangements"]
    dynamics: "mf-ff"

room_stat_to_musical_character:
  high_on_low_off:
    energy: "high"
    texture: "melodic_rhythmic_active"
    dynamics: "forte"
    tempo: "energetic"
  
  low_on_high_off:
    energy: "low"
    texture: "ambient_spacious_textural"
    dynamics: "piano"
    tempo: "slow_atmospheric"
  
  balanced:
    energy: "moderate"
    texture: "harmonic_structured_classical"
    dynamics: "mezzo"
    tempo: "moderate"
  
  fluctuating:
    energy: "variable"
    texture: "experimental_glitchy_unpredictable"
    dynamics: "dynamic_changes"
    tempo: "variable"

# WHITE ALBUM GENERATION RULES

generation_workflow:
  step_1_room_selection:
    method: "Random room selection weighted by narrative flow"
    input: "Current party state, previous rooms visited"
    output: "Next room encounter"
  
  step_2_encounter_generation:
    method: "Room stats + encounter type â†’ musical event"
    input: "Room ON/OFF stats, encounter difficulty"
    output: "Musical event parameters"
  
  step_3_musical_translation:
    method: "Convert RPG mechanics to musical elements"
    input: "Room musical character, encounter outcome"
    output: "MIDI generation parameters"
  
  step_4_temporal_layering:
    method: "Layer character origins (time periods) as musical eras"
    input: "Character time/place origins"
    output: "Historical musical style blending"
  
  step_5_cross_album_reference:
    method: "Use Observatory connections to blend Rainbow Table themes"
    input: "Current room, previous album themes"
    output: "Cross-referenced musical motifs"

connection_types_to_transitions:
  direct:
    musical_translation: "Smooth transitions, related keys"
    modulation: "close_key_relationships"
    rhythm: "tempo_consistency"
  
  hidden:
    musical_translation: "Sudden modulations, surprise connections"
    modulation: "distant_key_jumps"
    rhythm: "unexpected_tempo_changes"
  
  conditional:
    musical_translation: "Transitions depend on musical context"
    modulation: "contextual_based"
    rhythm: "state_dependent"

# NEURAL NETWORK TRAINING PARAMETERS

training_data_structure:
  room_vectors:
    components: ["on_stat", "off_stat", "musical_character", "encounter_types"]
    normalization: "0_to_1_scale"
  
  encounter_vectors:
    components: ["difficulty", "type", "outcome", "musical_result"]
    encoding: "one_hot_categorical"
  
  musical_output_vectors:
    components: ["tempo", "key", "dynamics", "texture", "themes"]
    format: "midi_parameters"

model_architecture:
  input_layer: "room_state + character_state + previous_actions"
  hidden_layers: "recurrent_for_temporal_memory"
  output_layer: "musical_parameters + next_room_probability"
  
training_objectives:
  primary: "Generate musically coherent room encounters"
  secondary: "Maintain narrative flow through palace"
  tertiary: "Reference previous Rainbow Table albums appropriately"

# EVALUATION METRICS

musical_quality_metrics:
  harmonic_coherence: "Chord progressions make sense"
  rhythmic_consistency: "Beats align with room character"
  textural_appropriateness: "Sounds match room description"
  dynamic_flow: "Energy levels appropriate for encounters"

narrative_quality_metrics:
  room_consistency: "Musical character matches room description"
  encounter_logic: "Musical events match RPG encounters"
  progression_flow: "Movement through palace feels natural"
  climax_structure: "Great Chamber feels like proper climax"

innovation_metrics:
  rainbow_table_synthesis: "Successfully blends previous album themes"
  temporal_layering: "Character time periods create interesting musical combinations"
  rpg_music_translation: "Game mechanics create novel musical structures"
  ai_creativity: "Neural network generates surprising but appropriate content"